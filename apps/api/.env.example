# =============================================================================
# ForgeStack API - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
# Local: postgresql://postgres:postgres@localhost:5432/forgestack_dev
# Neon: Get from https://console.neon.tech → Your Project → Connection Details
# Supabase: Get from https://app.supabase.com → Project Settings → Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/forgestack_dev"

# -----------------------------------------------------------------------------
# REDIS
# -----------------------------------------------------------------------------
# Redis connection string (required for BullMQ, rate limiting, caching)
# Format: redis://HOST:PORT or redis://:PASSWORD@HOST:PORT
# Local: redis://localhost:6379
# Upstash: Get from https://console.upstash.com → Your Database → Details
# Redis Cloud: Get from https://app.redislabs.com → Databases → Connect
REDIS_URL="redis://localhost:6379"

# -----------------------------------------------------------------------------
# AUTHENTICATION (better-auth)
# -----------------------------------------------------------------------------
# Secret key for signing auth tokens (min 32 characters)
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET="your-secret-key-at-least-32-characters-long"

# Base URL of the API (used for auth callbacks)
# Local: http://localhost:4000
# Production: https://api.yourdomain.com
BETTER_AUTH_URL="http://localhost:4000"

# -----------------------------------------------------------------------------
# EMAIL (Resend)
# -----------------------------------------------------------------------------
# Resend API key for sending transactional emails
# Get from: https://resend.com/api-keys
RESEND_API_KEY="re_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Email sender address (must be verified domain in Resend)
# Verify domain at: https://resend.com/domains
EMAIL_FROM="noreply@yourdomain.com"

# -----------------------------------------------------------------------------
# FRONTEND URL
# -----------------------------------------------------------------------------
# Frontend URL for CORS and email links
# Local: http://localhost:3000
# Production: https://app.yourdomain.com
FRONTEND_URL="http://localhost:3000"

# =============================================================================
# V2 FEATURES
# =============================================================================

# -----------------------------------------------------------------------------
# STRIPE BILLING
# -----------------------------------------------------------------------------
# Stripe API keys and configuration
# Get from: https://dashboard.stripe.com/apikeys

# Secret key (starts with sk_test_ or sk_live_)
STRIPE_SECRET_KEY="sk_test_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Webhook signing secret (starts with whsec_)
# Get from: https://dashboard.stripe.com/webhooks → Your Endpoint → Signing secret
STRIPE_WEBHOOK_SECRET="whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Price IDs for subscription plans
# Create products/prices at: https://dashboard.stripe.com/products
# Use the price ID (starts with price_)
STRIPE_PRICE_ID_STARTER="price_xxxxxxxxxxxxxxxxxxxx"
STRIPE_PRICE_ID_PRO="price_xxxxxxxxxxxxxxxxxxxx"
STRIPE_PRICE_ID_ENTERPRISE="price_xxxxxxxxxxxxxxxxxxxx"

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 (S3-Compatible Storage)
# -----------------------------------------------------------------------------
# R2 credentials for file uploads
# Get from: https://dash.cloudflare.com → R2 → Manage R2 API Tokens

# Your Cloudflare account ID
# Find at: https://dash.cloudflare.com → Overview → Right sidebar
R2_ACCOUNT_ID="your-cloudflare-account-id"

# R2 API token credentials
# Create at: https://dash.cloudflare.com → R2 → Manage R2 API Tokens → Create API Token
R2_ACCESS_KEY_ID="your-r2-access-key-id"
R2_SECRET_ACCESS_KEY="your-r2-secret-access-key"

# R2 bucket name
# Create at: https://dash.cloudflare.com → R2 → Create bucket
R2_BUCKET_NAME="forgestack-files"

# Public URL for file access (optional, for public buckets)
# Configure at: R2 → Bucket → Settings → Public Access
R2_PUBLIC_URL="https://files.yourdomain.com"

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
# Enable/disable rate limiting (default: true)
RATE_LIMIT_ENABLED="true"

# Fail open if Redis is unavailable (default: true)
# true = allow requests if Redis is down
# false = reject requests if Redis is down
RATE_LIMIT_FAIL_OPEN="true"

